# Metafoks Application

Фреймворк с инжектом зависимостей, который поддерживает свою собственную систему расширений и их автозапуска. Inspired
by Java Spring.

#### Содержание:

- [Установка](#установка)
- [Запуск](#запуск)
- [Использование](#использование)

#### Документация:

- [Аннотации](annotations.md)
- [Компоненты](components.md)
- [Переменные среды (env)](env.md)
- [Расширения](extensions.md)

## Установка

Для установки и первичной настройки можно использовать `@metafoks/cli` модуль. Для этого сначала необходимо его
глобально установить:

```sh
npm i -g @metafoks/cli
```

Далее создайте директорию, перейдите в нее и выполните скрипт инициализации:

```sh
mkdir project
cd project

metafoks init
```

После скрипта инициализации, в директории будет разложена следующая архитектура:

- `src/` - рабочая директория приложения;
- `src/index.ts` - основной файл приложения с точкой входа;
- `config/` - директория конфигурации;
- `config/config.json` - стандартный конфиг вашего приложения.

## Запуск

Для запуска приложения также необходимо использовать [cli](#установка).

```sh
metafoks start
```

После выполнения команды, в консоли будет отображен лог запуска приложения.

## Использование

```ts
@MetafoksApplication
export class Application {
    public constructor(private deps: {}) {}

    start() {
        // your app starts here
    }
}
```

Стартовый класс приложения Metafoks выглядит так. За работу всей системы и инициализацию контекста отвечает
аннотация `@MetafoksApplication`.

Кроме основного класса в директории `config` есть файл `config.json`. В нем может находиться любая необходимая вам
конфигурация.

Файлы конфигурации также могут быть профилированы с помощью аннотации [`@ActiveProfile`](annotations.md#аннотации-конфигурации-приложения).

```ts
@MetafoksApplication
@ActiveProfile( 'prod' )
export class Application {
}
```

При такой настройке будет использован файл `config/config.prod.json`. Данный параметр также может быть передан
через `env` параметр `CONFIG_PROFILE`. Приоритет `env` переменной выше, чем у аннотации. Подробнее о
поддерживаемых `env` значения можно почитать тут: [Metafoks Env Variables](env.md)